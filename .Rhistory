library(corrplot)
library(Hmisc)
library(car)
# flattenCorrMatrix
flattenCorrMatrix <- function(cormat, pmat) {
ut <- upper.tri(cormat)
data.frame(
row = rownames(cormat)[row(cormat)[ut]],
column = rownames(cormat)[col(cormat)[ut]],
cor  =(cormat)[ut],
p = pmat[ut]
)
}
data_amb<-read.csv("./data/amb/Amb.csv")
names(data_amb)
rownames(data_amb)<-data_amb$ParcelaID
names(data_amb)[1]<-"PlotID"
names(data_amb)
res1<-rcorr(as.matrix(data_amb[,3:5]))
res2<-rcorr(as.matrix(data_amb[,9:17,33:44]))
res4<-rcorr(as.matrix(data_amb[,c(18:20)]))
res3<-rcorr(as.matrix(data_amb[,c(6:8,21:32)]))
flattenCorrMatrix(res1$r, res1$P)
data_amb<-read.csv("./data/amb/Amb.csv")
data_amb<-read.csv("./data/Amb.csv")
names(data_amb)
rownames(data_amb)<-data_amb$ParcelaID
names(data_amb)[1]<-"PlotID"
names(data_amb)
res1<-rcorr(as.matrix(data_amb[,3:5]))
res2<-rcorr(as.matrix(data_amb[,9:17,33:44]))
res3<-rcorr(as.matrix(data_amb[,c(6:8,21:32)]))
res4<-rcorr(as.matrix(data_amb[,c(18:20)]))
res1<-rcorr(as.matrix(data_amb[,3:5]))
res2<-rcorr(as.matrix(data_amb[,9:17,33:44]))
res3<-rcorr(as.matrix(data_amb[,c(6:8,21:32)]))
res4<-rcorr(as.matrix(data_amb[,c(18:20)]))
flattenCorrMatrix(res1$r, res1$P)
corrplot(res1$r, type = "upper", order = "hclust",
p.mat=res1$P , tl.col = "black",
sig.level = 0.05,insig="blank")
flattenCorrMatrix(res2$r, res2$P)
corrplot(res2$r, type = "upper", order = "hclust",
p.mat=res2$P , tl.col = "black",
sig.level = 0.05,insig="blank")
data_amb
flattenCorrMatrix(res1$r, res1$P)
data<-iris
rm(list=ls())
data<-iris
data
data<-iris[,-1]
data<-iris[,-5]
data<-iris[,-5] # cargo datos iris sin el factor species
library(corrplot)
data<-iris[,-5] # cargo datos iris sin el factor species
res<-rcorr(as.matrix(data))
res<-rcorr(data)
res<-rcorr(as.matrix(data))
flattenCorrMatrix(res1$r, res1$P)
res$r # matriz con coeficientes de correlación R
res$P # matriz con los p de significancia de cada correlación
corrplot(res$r, type = "upper", order = "hclust",
p.mat=res$P , tl.col = "black",
sig.level = 0.05,insig="blank")
corrplot(corr=res$r,
method="number",
type = "upper",
order = "hclust",
p.mat=res$P ,
tl.col = "black",
sig.level = 0.05,
insig="blank")
